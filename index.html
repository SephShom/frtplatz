<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Energetika</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>    
    <header>
      <nav class="navbar navbar-expand-lg">
        <div class="container-fluid">
          <a class="navbar-brand" href="#">
            <div class="logo-container">
              <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-fire" viewBox="0 0 16 16">
                <path d="M8 16c3.314 0 6-2 6-5.5 0-1.5-.5-4-2.5-6 .25 1.5-1.25 2-1.25 2C11 4 9 .5 6 0c.357 2 .5 4-2 6-1.25 1-2 2.729-2 4.5C2 14 4.686 16 8 16Zm0-1c-1.657 0-3-1-3-2.75 0-.75.25-2 1.25-3C6.125 10 7 10.5 7 10.5c-.375-1.25.5-3.25 2-3.5-.179 1-.25 2 1 3 .625.5 1 1.364 1 2.25C11 14 9.657 15 8 15Z"/>
              </svg>
            </div>
          </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span><i class="bi bi-menu-button-wide"></i></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">            
            <div class="w-100">              
              <div class="d-flex justify-content-between">
                <ul class="navbar-nav menu-explore">
                  <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                      Explorar
                    </a>
                    <ul class="dropdown-menu">
                      <li><a class="dropdown-item" href="#">Evento1</a></li>
                      <li><a class="dropdown-item" href="#">Evento2</a></li>
                      <li><hr class="dropdown-divider"></li>
                      <li><a class="dropdown-item" href="#">Evento3</a></li>
                    </ul>
                  </li>
                </ul>
                <div class="search">
                  <form class="d-flex" role="search">
                    <div class="input-group">
                      <span class="input-group-text"><i class="bi bi-search"></i></span>
                      <input type="search" aria-label="Search" class="form-control me-2" placeholder="¿Que deseas aprender?">  
                    </div>
                  </form>
                </div>                
                <ul class="navbar-nav me-auto mb-2 mb-lg-0 d-flex justify-content-end">
                  <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="#">Cursos</a>
                  </li>
                  <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                      Comunidad
                    </a>
                    <ul class="dropdown-menu">
                      <li><a class="dropdown-item" href="#">Eventos</a></li>
                      <li><a class="dropdown-item" href="#">Blog</a></li>
                      <li><hr class="dropdown-divider"></li>
                      <li><a class="dropdown-item" href="#">Live</a></li>
                    </ul>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#">Lanzamientos</a>
                  </li>
                  
                  <li class="nav-item">
                    <a class="nav-link" href="#">Planes</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#">Contáctanos</a>
                  </li>
                </ul> 
              </div>
            </div>                      
            <button type="button" class="ms-3 btn btn-success button-toggled">Iniciar sesion</button>
              
                                   
          </div>
          <div class="button-row">
            <button type="button" class="ms-3 btn btn-outline-warning">Empresas</button>
            <button type="button" class="ms-3 btn btn-success">Iniciar sesion</button>
          </div>          
        </div>
      </nav>
    </header>
    <main class="main">
      <!--STEPPER: Seccion izquierda-->
      <div class="d-flex">
        <div class="marker-main">
          <div id="markerList" class="marker-list">
            <a id="openButton" class="btn btn-primary" data-bs-toggle="offcanvas" href="#offcanvas" role="button" aria-controls="offcanvas">
              <i class="bi bi-chevron-compact-right"></i>
            </a>          
            <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvas" aria-labelledby="offcanvasLabel">
              <div class="offcanvas-header">
                <h5 class="offcanvas-title" id="offcanvasLabel">Offcanvas</h5>              
              </div>
              <!--STEPPER: Navegacion desplegable-->
              <div id="canvas-stepper" class="offcanvas-body">
                <a id="closeButton" class="btn btn-primary" data-bs-toggle="offcanvas" href="#offcanvas" role="button" aria-controls="offcanvas">
                  <i class="bi bi-chevron-compact-left"></i>
                </a>          
                <div id="side-stepper" class="offcanvas-body-card">                
                  <!--Generador html-->                                            
                </div>
              </div>
            </div>
            <!--STEPPER: Seccion siempre visible-->
            <div class="body-stepper">                              
              <div id="stepper" class="stepper">
                <!--Generador html-->                                            
              </div>                            
            </div>
          </div>
        </div>  
        <div class="row">            
          <div class="col-12 col-xxl-8 col-xl-8 col-lg-8 col-md-8 col-sm-12">
            <!--CENTRAL VIDEO: Contenedor general de toda la seccion central-->
            <div class="video-main">
              <div class="video-wrapper">
                <div class="video-container">
                  <iframe id="videoFrame" class="responsive-iframe" src="./assets/videos/video1.mp4"></iframe>
                </div>
                <div class="d-flex justify-content-start align-items-center m-3">
                  <div class="logo-container">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-fire" viewBox="0 0 16 16">
                      <path d="M8 16c3.314 0 6-2 6-5.5 0-1.5-.5-4-2.5-6 .25 1.5-1.25 2-1.25 2C11 4 9 .5 6 0c.357 2 .5 4-2 6-1.25 1-2 2.729-2 4.5C2 14 4.686 16 8 16Zm0-1c-1.657 0-3-1-3-2.75 0-.75.25-2 1.25-3C6.125 10 7 10.5 7 10.5c-.375-1.25.5-3.25 2-3.5-.179 1-.25 2 1 3 .625.5 1 1.364 1 2.25C11 14 9.657 15 8 15Z"/>
                    </svg>
                  </div>
                  <div class="ps-3">
                    Titulo del curso Lorem ipsum dolor sit amet consectetur adipisicing elit.
                  </div>               
                </div>
                <div class="m-2">
                  <button type="button" class="btn btn-outline-warning p-2" onclick="enableTest()">Hacer examen</button>                  
                </div>                
                <div id="statements"><!--Generador html--></div>
                <div class="recursos-main">
                  <ul class="nav nav-tabs" id="myTabRh" role="tablist">
                    <li class="nav-item" role="presentation">
                      <button class="nav-link active" id="res-tab" data-bs-toggle="tab" data-bs-target="#res-tab-pane" type="button" role="tab" aria-controls="res-tab-pane" aria-selected="true">Recursos</button>
                    </li>                
                    <li class="nav-item" role="presentation">
                      <button class="nav-link" id="res1-tab" data-bs-toggle="tab" data-bs-target="#res1-tab-pane" type="button" role="tab" aria-controls="res1-tab-pane" aria-selected="true">Tab1</button>
                    </li>                
                    <li class="nav-item" role="presentation">
                      <button class="nav-link" id="res2-tab" data-bs-toggle="tab" data-bs-target="#res2-tab-pane" type="button" role="tab" aria-controls="res2-tab-pane" aria-selected="true">Tab2</button>
                    </li>                
                  </ul>
                  <div class="tab-content" id="myTabContentRh">
                    <div class="tab-pane fade show active" id="res-tab-pane" role="tabpanel" aria-labelledby="home-tab" tabindex="0">
                      <div class="recursos-container">
                        <div class="seccion p-3">
                          <h4 class="mb-3">Archivos de la clase</h4>
                          <div id="archivos" class="d-flex flex-column">
                            <!--Generador HTML-->
                          </div>
                        </div>                  
                        <div class="seccion p-3">
                          <h4 class="mb-3">Lecturas recomendadas</h4>
                          <div id="lecturas" class="d-flex flex-column">
                            <!--Generador HTML-->
                          </div>
                        </div>                  
                      </div>                    
                    </div>
                    <div class="tab-pane fade" id="res1-tab-pane" role="tabpanel" aria-labelledby="res1-tab" tabindex="1">Lorem, ipsum dolor sit amet consectetur adipisicing elit. Explicabo, obcaecati! Impedit praesentium optio repellat incidunt voluptatum soluta perferendis blanditiis fugiat, accusantium dignissimos asperiores, tempore, assumenda voluptates ad quam amet minima?</div>                
                    <div class="tab-pane fade" id="res2-tab-pane" role="tabpanel" aria-labelledby="res2-tab" tabindex="2">Lorem ipsum dolor sit amet consectetur adipisicing elit. Placeat pariatur reprehenderit enim mollitia animi labore itaque velit, sapiente vel, illum accusantium, laborum beatae minima porro fuga tenetur. Unde, temporibus officia.</div>
                  </div>
                </div>
                <!--MOBILE: Seccion central que se muestra sólo en modo móvil-->
                <div class="tabs-main">
                  <ul class="nav nav-tabs" id="myTabRes" role="tablist">
                    <li class="nav-item" role="presentation">
                      <button class="nav-link active" id="mcursos-tab" data-bs-toggle="tab" data-bs-target="#mcursos-tab-pane" type="button" role="tab" aria-controls="mcursos-tab-pane" aria-selected="true">Temario</button>
                    </li>
                    <li class="nav-item" role="presentation">
                      <button class="nav-link" id="mres-tab" data-bs-toggle="tab" data-bs-target="#mres-tab-pane" type="button" role="tab" aria-controls="mres-tab-pane" aria-selected="false">Recursos</button>
                    </li>
                    <li class="nav-item" role="presentation">
                      <button class="nav-link" id="mchat-tab" data-bs-toggle="tab" data-bs-target="#mchat-tab-pane" type="button" role="tab" aria-controls="mchat-tab-pane" aria-selected="false">Aportes</button>
                    </li>
                    <li class="nav-item" role="presentation">
                      <button class="nav-link" id="mchats-tab" data-bs-toggle="tab" data-bs-target="#mchats-tab-pane" type="button" role="tab" aria-controls="mchats-tab-pane" aria-selected="false">Preguntas</button>
                    </li>
                    <li class="nav-item" role="presentation">
                      <button class="nav-link" id="mres1-tab" data-bs-toggle="tab" data-bs-target="#mres1-tab-pane" type="button" role="tab" aria-controls="mres1-tab-pane" aria-selected="true">Tab1</button>
                    </li>                
                    <li class="nav-item" role="presentation">
                      <button class="nav-link" id="mres2-tab" data-bs-toggle="tab" data-bs-target="#mres2-tab-pane" type="button" role="tab" aria-controls="mres2-tab-pane" aria-selected="true">Tab2</button>
                    </li>                
                  </ul>
                  <div class="tab-content" id="myTabContentRes">
                    <div class="tab-pane fade show active" id="mcursos-tab-pane" role="tabpanel" aria-labelledby="mcursos-tab" tabindex="0">
                      <div>
                        <div class="marker-list">                        
                          <div id="mobile-stepper" class="offcanvas-body-card">                
                            <!--Generador HTML-->                            
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="tab-pane fade" id="mres-tab-pane" role="tabpanel" aria-labelledby="mres-tab" tabindex="1">
                      <div>
                        <div class="p-3 border-bottom">
                          <h4 class="mb-3">Archivos de la clase</h4>
                          <div id="mobile-archivos" class="d-flex flex-column">
                            <!--Generador HTML-->
                          </div>
                        </div>                  
                        <div class="p-3 border-bottom">
                          <h4 class="mb-3">Lecturas recomendadas</h4>
                          <div id="mobile-lecturas" class="d-flex flex-column">
                            <!--Generador HTML-->
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="tab-pane fade" id="mchat-tab-pane" role="tabpanel" aria-labelledby="mchat-tab" tabindex="2">
                      <div id="mobile-aportes" class="chat-box">
                        <!--Generador de HTML-->
                      </div>
                    </div>
                    <div class="tab-pane fade" id="mchats-tab-pane" role="tabpanel" aria-labelledby="mchats-tab" tabindex="3">
                      <div id="mobile-preguntas" class="chat-box">
                        <!--Generador de HTML-->
                      </div>
                    </div>
                    <div class="tab-pane fade" id="mres1-tab-pane" role="tabpanel" aria-labelledby="mres1-tab" tabindex="4">Lorem ipsum dolor sit amet consectetur adipisicing elit. Quod tempore assumenda dolor vero obcaecati, molestiae odit quisquam veniam nostrum. Sunt omnis eaque fugiat aperiam, reprehenderit amet voluptatum ipsam error soluta!</div>                
                    <div class="tab-pane fade" id="mres2-tab-pane" role="tabpanel" aria-labelledby="mres2-tab" tabindex="5">Lorem ipsum dolor sit amet consectetur, adipisicing elit. Dignissimos, dolorem architecto harum, adipisci magnam nam odio velit quisquam perspiciatis accusamus esse dolor itaque! Velit hic maiores nesciunt quis animi aliquam!</div>
                  </div>
                </div>
                <!--end MOBILE-->
              </div>
            </div>
          </div>
          <div class="col-12 col-xxl-4 col-xl-4 col-lg-4 col-md-4 col-sm-12">
            <!--CHAT: Sección derecha que contienen las conversaciones y preguntas-->
            <div class="chat-main">
              <div class="input-container">
                <textarea id="message-input" class="input" type="text" placeholder="Escribe tu aporte o pregunta"></textarea>
              </div>
              <div class="button-chat">
                <button type="button" class="btn btn-outline-success btn-sm" onclick="saveMessage('A')">Aporte</button>
                <button type="button" class="btn btn-outline-success btn-sm" onclick="saveMessage('P')">Pregunta</button>
              </div>              
              <div class="mt-3">
                <ul class="nav nav-tabs" id="myTab" role="tablist">
                  <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="chat-tab" data-bs-toggle="tab" data-bs-target="#chat-tab-pane" type="button" role="tab" aria-controls="chat-tab-pane" aria-selected="true">Aportes</button>
                  </li>
                  <li class="nav-item" role="presentation">
                    <button class="nav-link" id="chats-tab" data-bs-toggle="tab" data-bs-target="#chats-tab-pane" type="button" role="tab" aria-controls="chats-tab-pane" aria-selected="false">Preguntas</button>
                  </li>              
                </ul>
                <div class="tab-content" id="myTabContent">
                  <div class="tab-pane fade show active" id="chat-tab-pane" role="tabpanel" aria-labelledby="chat-tab" tabindex="0">                    
                    <div class="d-flex p-3">
                      <div class="small">Ordenar por:</div>&nbsp;&nbsp;&nbsp;
                      <div role="group" aria-label="Order by">                        
                        <span class="badge rounded-pill" onclick="chatOrderVotados(event, 'A')">Más votados</span>
                        <span class="badge rounded-pill" onclick="chatOrderNuevos(event, 'A')">Más nuevos</span>
                        <span class="badge rounded-pill" onclick="chatOrderSin(event, 'A')">Sin responder</span>  
                      </div>                      
                    </div>                    
                    <div id="aportes" class="chat-box">
                      <!--Generador de HTML-->
                    </div>
                  </div>
                  <div class="tab-pane fade" id="chats-tab-pane" role="tabpanel" aria-labelledby="chats-tab" tabindex="1">                    
                    <div class="d-flex p-3">
                      <div class="small">Ordenar por:</div>&nbsp;&nbsp;&nbsp;
                      <div role="group" aria-label="Order by">                        
                        <span class="badge rounded-pill" onclick="chatOrderVotados(event, 'P')">Más votados</span>
                        <span class="badge rounded-pill" onclick="chatOrderNuevos(event, 'P')">Más nuevos</span>
                        <span class="badge rounded-pill" onclick="chatOrderSin(event, 'P')">Sin responder</span>  
                      </div>                      
                    </div>
                    <div id="preguntas" class="chat-box">
                      <!--Generador de HTML-->
                    </div>
                  </div>              
                </div>
              </div>  
            </div>   
          </div>
        </div>
      </div>
      
    </main>
    <footer>
      <div id="liveAlertPlaceholder" class="message"></div>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js" integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V" crossorigin="anonymous"></script>        
       
    <script>                  
      fetch('data/RecursosArchivos.txt')
      .then(response => response.text())
      .then(data => {        
        // Convertir el contenido a JSON si es necesario        
        const archivos = JSON.parse(data);                
        const archivoContainer = document.getElementById("archivos");
        const archivoMContainer = document.getElementById("mobile-archivos")
        archivos.forEach(archivo => {
          // Se crea el elemento a del archivo screen normal
          const aArchivo = document.createElement("a");
          aArchivo.href = archivo.src;
          aArchivo.target = "_blank";
          aArchivo.className = "d-flex justify-content-between";
          // Se crea el elemento a del archivo screen mobile
          const aMArchivo = document.createElement("a");
          aMArchivo.href = archivo.src;
          aMArchivo.target = "_blank";
          aMArchivo.className = "d-flex justify-content-between";
          // Se crea el div que contiene el icono y el nombre
          const divArchivo = document.createElement("div");
          divArchivo.className = "d-flex";
          // Se crea el elemento icono descripcion
          const iDescArchivo = document.createElement("i");
          iDescArchivo.className = "bi bi-filetype-pdf";
          //Se crea el elemento div descripcion
          const divDescripcion = document.createElement("div");
          divDescripcion.className = "ms-3";
          divDescripcion.textContent = archivo.name;

          divArchivo.appendChild(iDescArchivo);
          divArchivo.appendChild(divDescripcion);
          // Se crea el elemento icono link
          const iArchivo = document.createElement("i");
          iArchivo.className = "bi bi-save";

          //Se generan clones de los elementos
          const divMArchivo = divArchivo.cloneNode(true);
          const iMArchivo = iArchivo.cloneNode(true);

          aArchivo.appendChild(divArchivo);
          aArchivo.appendChild(iArchivo);
          archivoContainer.appendChild(aArchivo);

          aMArchivo.appendChild(divMArchivo);
          aMArchivo.appendChild(iMArchivo);
          archivoMContainer.appendChild(aMArchivo);
        });
      }).catch(error => {
        console.log('Error al leer el archivo:', error);
      });
      
      fetch('data/RecursosLecturas.txt')
      .then(response => response.text())
      .then(data => {        
        // Convertir el contenido a JSON si es necesario        
        const lecturas = JSON.parse(data);                
        
        const lecturaContainer = document.getElementById("lecturas");
        const lecturaMContainer = document.getElementById("mobile-lecturas")
        lecturas.forEach(lectura => {
          // Se crea el elemento a de la lectura screen normal
          const aLectura = document.createElement("a");
          aLectura.href = lectura.src;
          aLectura.target = "_blank";
          aLectura.className = "d-flex justify-content-between";
          // Se crea el elemento a del archivo screen mobile
          const aMLectura = document.createElement("a");
          aMLectura.href = lectura.src;
          aMLectura.target = "_blank";
          aMLectura.className = "d-flex justify-content-between";
          // Se crea el div que contiene el icono y el nombre
          const divLectura = document.createElement("div");
          divLectura.className = "d-flex";
          // Se crea el elemento icono descripcion
          const iDescLectura = document.createElement("i");
          iDescLectura.className = "bi bi-circle";
          //Se crea el elemento div descripcion
          const divDescripcion = document.createElement("div");
          divDescripcion.className = "ms-3";
          divDescripcion.textContent = lectura.name;

          divLectura.appendChild(iDescLectura);
          divLectura.appendChild(divDescripcion);
          // Se crea el elemento icono link
          const iLectura = document.createElement("i");
          iLectura.className = "bi bi-box-arrow-up-right";

          //Se generan clones de los elementos
          const divMLectura = divLectura.cloneNode(true);
          const iMLectura = iLectura.cloneNode(true);

          aLectura.appendChild(divLectura);
          aLectura.appendChild(iLectura);
          lecturaContainer.appendChild(aLectura);

          aMLectura.appendChild(divMLectura);
          aMLectura.appendChild(iMLectura);
          lecturaMContainer.appendChild(aMLectura);
        });
      }).catch(error => {
        console.log('Error al leer el archivo:', error);
      });
      
      function saveMessage(type) {
        const user = {
          avatar: "/assets/images/avatar1.jpg",
          name: "Erika"
        }
        const messageInput = document.getElementById("message-input");        
        const chatMessages = JSON.parse(localStorage.getItem("chat")); 
        const chatMessagesArray = Array.from(chatMessages);
        /*Post agregar funcion httpRequest Post*/
        const divPreguntas = document.getElementById("preguntas");
        const divAportes = document.getElementById("aportes");
        const divMPreguntas = document.getElementById("mobile-preguntas");
        const divMAportes = document.getElementById("mobile-aportes");
        //Crea el elemento div contenedor principal de chat screen normal
        const divChatBox = document.createElement("div");
          
          divChatBox.id = "chat-" + chatMessagesArray.length + 1; //valor numerico que deberia ser reemplazado por el resultado del post
          divChatBox.className = "chat-box-item";

          //Crea el elemento div contenedor principal de chat screen mobile
          const divMChatBox = document.createElement("div");
          divMChatBox.id = "mchat-" + chatMessagesArray.length + 1; //valor numerico que deberia ser reemplazado por el resultado del post
          divMChatBox.className = "chat-box-item";
          
          //Crea el elemento div header del chat item
          const divUserHeader = document.createElement("div");
          divUserHeader.className = "d-flex user-header";

          //Crea el elemento div contenedor del avatar
          const divAvatarContainer = document.createElement("div");
          divAvatarContainer.className = "img-thumbnail-container";

          //Crea el elemento img del avatar
          const imgAvatar = document.createElement("img");
          imgAvatar.src = user.avatar; // reemplazar por datos del usaurio session actual
          imgAvatar.className = "img-thumbnail-avatar";
          imgAvatar.alt = "Avatar";

          //Agrega el elemento img avatar a su contenedor
          divAvatarContainer.appendChild(imgAvatar);

          //Crea los divs del nombre del usuario
          const divUserContainer = document.createElement("div");
          divUserContainer.className = "d-flex flex-column";
          const divUserName = document.createElement("div");
          divUserName.className = "chat-name";
          divUserName.textContent = user.name; // reemplazar por datos del usaurio session actual
          const divSince = document.createElement("div");
          divSince.className = "chat-since";
          divSince.textContent = "Hace " + 0 + " días";
          divUserContainer.appendChild(divUserName);
          divUserContainer.appendChild(divSince);

          // Append chld to userheader
          divUserHeader.appendChild(divAvatarContainer);
          divUserHeader.appendChild(divUserContainer);

          //Crea el elemento div del userBody
          const divUserBody = document.createElement("div");
          divUserBody.className = "d-flex user-body";

          const divStarsContainer = document.createElement("div");
          divStarsContainer.className = "d-flex flex-column align-items-center justify-content-center stars";

          const iStar = document.createElement("i");
          iStar.className = "bi bi-heart";
          iStar.setAttribute("onclick", "addVote(event)");

          const iStarActive = document.createElement("i");
          iStarActive.className = "bi bi-heart-fill hidden";
          iStarActive.setAttribute("onclick", "addVote(event)");;

          const divStars = document.createElement("div");
          divStars.textContent = 0;
          divStars.className = "votes";

          divStarsContainer.appendChild(iStar);
          divStarsContainer.appendChild(iStarActive);
          divStarsContainer.appendChild(divStars);

          const divUserBodyMessage = document.createElement("div");
          divUserBodyMessage.className = "user-body-message";
          divUserBodyMessage.textContent = messageInput.value;

          divUserBody.appendChild(divStarsContainer);
          divUserBody.appendChild(divUserBodyMessage);

          divChatBox.appendChild(divUserHeader);
          divChatBox.appendChild(divUserBody);

          //se generan clones de los elementos sin id para la version mobile
          const divUserHeaderClon = divUserHeader.cloneNode(true);
          const divUserBodyClon = divUserBody.cloneNode(true);
          divMChatBox.appendChild(divUserHeaderClon);
          divMChatBox.appendChild(divUserBodyClon);

          if (type === 'P') {
            divPreguntas.appendChild(divChatBox);  
            divMPreguntas.appendChild(divMChatBox);
          }
          if (type === 'A') {
            divAportes.appendChild(divChatBox);
            divMAportes.appendChild(divMChatBox);
          }
      }

      fetch('data/ChatMensajes.txt')
      .then(response => response.text())
      .then(data => {        
        // Convertir el contenido a JSON si es necesario        
        const chatMessages = JSON.parse(data);                
        
        /*Innecesario en implementacion httpRequest*/  
        localStorage.setItem("chat", JSON.stringify(chatMessages));

        const divPreguntas = document.getElementById("preguntas");
        const divAportes = document.getElementById("aportes");
        const divMPreguntas = document.getElementById("mobile-preguntas");
        const divMAportes = document.getElementById("mobile-aportes");
        chatMessages.forEach(chat => {
          //Crea el elemento div contenedor principal de chat screen normal
          const divChatBox = document.createElement("div");
          divChatBox.id = "chat-" + chat.id;
          divChatBox.className = "chat-box-item";

          //Crea el elemento div contenedor principal de chat screen mobile
          const divMChatBox = document.createElement("div");
          divMChatBox.id = "mchat-" + chat.id;
          divMChatBox.className = "chat-box-item";
          
          //Crea el elemento div header del chat item
          const divUserHeader = document.createElement("div");
          divUserHeader.className = "d-flex user-header";

          //Crea el elemento div contenedor del avatar
          const divAvatarContainer = document.createElement("div");
          divAvatarContainer.className = "img-thumbnail-container";

          //Crea el elemento img del avatar
          const imgAvatar = document.createElement("img");
          imgAvatar.src = chat.avatar;
          imgAvatar.className = "img-thumbnail-avatar";
          imgAvatar.alt = "Avatar";

          //Agrega el elemento img avatar a su contenedor
          divAvatarContainer.appendChild(imgAvatar);

          //Crea los divs del nombre del usuario
          const divUserContainer = document.createElement("div");
          divUserContainer.className = "d-flex flex-column";
          const divUserName = document.createElement("div");
          divUserName.className = "chat-name";
          divUserName.textContent = chat.userName;
          const divSince = document.createElement("div");
          divSince.className = "chat-since";
          divSince.textContent = "Hace " + chat.days + " días";
          divUserContainer.appendChild(divUserName);
          divUserContainer.appendChild(divSince);

          // Append chld to userheader
          divUserHeader.appendChild(divAvatarContainer);
          divUserHeader.appendChild(divUserContainer);

          //Crea el elemento div del userBody
          const divUserBody = document.createElement("div");
          divUserBody.className = "d-flex user-body";

          const divStarsContainer = document.createElement("div");
          divStarsContainer.className = "d-flex flex-column align-items-center justify-content-center stars";

          const iStar = document.createElement("i");
          iStar.className = "bi bi-heart";
          iStar.setAttribute("onclick", "addVote(event)");

          const iStarActive = document.createElement("i");
          iStarActive.className = "bi bi-heart-fill hidden";
          iStarActive.setAttribute("onclick", "addVote(event)");;

          const divStars = document.createElement("div");
          divStars.textContent = chat.stars;
          divStars.className = "votes";

          divStarsContainer.appendChild(iStar);
          divStarsContainer.appendChild(iStarActive);
          divStarsContainer.appendChild(divStars);

          const divUserBodyMessage = document.createElement("div");
          divUserBodyMessage.className = "user-body-message";
          divUserBodyMessage.textContent = chat.message;

          divUserBody.appendChild(divStarsContainer);
          divUserBody.appendChild(divUserBodyMessage);

          divChatBox.appendChild(divUserHeader);
          divChatBox.appendChild(divUserBody);

          //se generan clones de los elementos sin id para la version mobile
          const divUserHeaderClon = divUserHeader.cloneNode(true);
          const divUserBodyClon = divUserBody.cloneNode(true);
          divMChatBox.appendChild(divUserHeaderClon);
          divMChatBox.appendChild(divUserBodyClon);

          if (chat.type === 'P') {
            divPreguntas.appendChild(divChatBox);  
            divMPreguntas.appendChild(divMChatBox);
          }
          if (chat.type === 'A') {
            divAportes.appendChild(divChatBox);
            divMAportes.appendChild(divMChatBox);
          }
          
        });

      }).catch(error => {
        console.log('Error al leer el archivo:', error);
      });
      
      /**/
      fetch('data/Curso.txt')
      .then(response => response.text())
      .then(data => {        
        // Convertir el contenido a JSON si es necesario        
        const steps = JSON.parse(data);                
      
      /*Innecesario en implementacion httpRequest*/  
      localStorage.setItem("answers", JSON.stringify(steps));

      const statements = document.getElementById("statements");
      const lessonList = document.getElementById("side-stepper");
      const lessonList1 = document.getElementById("stepper");
      const lessonListM = document.getElementById("mobile-stepper");

      steps.forEach((step, stepIndex) => {        
        //SIDE STEPPER
        const divStep = document.createElement("div");
        divStep.id = "step" + "ps-" + step.id;
        divStep.setAttribute("onclick", "stepFunction(event)");
        divStep.className = "step" + (step.active ? " step-active" : "");

        const divDivCircle = document.createElement("div");
        
        const circle = document.createElement("div");
        circle.setAttribute("class", "circle");
    
        const circleSpan = document.createElement("span");
        circleSpan.setAttribute("class", "uncomplete");
        circleSpan.textContent = step.number;

        const circleIcon = document.createElement("i");
        circleIcon.setAttribute("class", "bi bi-check uncomplete");

        circle.appendChild(circleSpan);
        circle.appendChild(circleIcon);
        
        divDivCircle.appendChild(circle);

        const divDivTitle = document.createElement("div");

        const title = document.createElement("div");
        title.setAttribute("class", "title");
        title.textContent = step.title;

        const caption = document.createElement("div");
        caption.setAttribute("class", "caption");
        caption.textContent = step.caption;

        divDivTitle.appendChild(title);
        divDivTitle.appendChild(caption);

        divStep.appendChild(divDivCircle);
        divStep.appendChild(divDivTitle);        

        lessonList.appendChild(divStep);
        /**/
        //STEPPER IZQUIERDA
        const divStep1 = document.createElement("div");
        divStep1.id = "step-" + step.id;
        divStep1.setAttribute("onclick", "stepFunction(event)");
        divStep1.className = "step" + (step.active ? " step-active" : "");

        const divDivCircle1 = document.createElement("div");
        
        const circle1 = document.createElement("div");
        circle1.setAttribute("class", "circle");
    
        const circleSpan1 = document.createElement("span");
        circleSpan1.setAttribute("class", "uncomplete");
        circleSpan1.textContent = step.number;

        const circleIcon1 = document.createElement("i");
        circleIcon1.setAttribute("class", "bi bi-check uncomplete");

        circle1.appendChild(circleSpan1);
        circle1.appendChild(circleIcon1);
        
        divDivCircle1.appendChild(circle1);

        const divDivTitle1 = document.createElement("div");

        const title1 = document.createElement("div");
        title1.setAttribute("class", "title");
        title1.textContent = "&nbsp;";

        const caption1 = document.createElement("div");
        caption1.setAttribute("class", "caption");
        caption1.textContent = "&nbsp;";

        divDivTitle1.appendChild(title1);
        divDivTitle1.appendChild(caption1);

        divStep1.appendChild(divDivCircle1);
        divStep1.appendChild(divDivTitle1);        

        lessonList1.appendChild(divStep1);
        /**/
        //STEPPER MOBILE
        const divStepM = document.createElement("div");
        divStepM.id = "m" + "step" + "ps-" + step.id;
        divStepM.setAttribute("onclick", "stepFunction(event)");
        divStepM.className = "step" + (step.active ? " step-active" : "");

        const divDivCircleM = document.createElement("div");
        
        const circleM = document.createElement("div");
        circleM.setAttribute("class", "circle");
    
        const circleSpanM = document.createElement("span");
        circleSpanM.setAttribute("class", "uncomplete");
        circleSpanM.textContent = step.number;

        const circleIconM = document.createElement("i");
        circleIconM.setAttribute("class", "bi bi-heart-fill uncomplete");

        circleM.appendChild(circleSpanM);
        circleM.appendChild(circleIconM);
        
        divDivCircleM.appendChild(circleM);

        const divDivTitleM = document.createElement("div");

        const titleM = document.createElement("div");
        titleM.setAttribute("class", "title");
        titleM.textContent = step.title;

        const captionM = document.createElement("div");
        captionM.setAttribute("class", "caption");
        captionM.textContent = step.caption;

        divDivTitleM.appendChild(titleM);
        divDivTitleM.appendChild(captionM);

        divStepM.appendChild(divDivCircleM);
        divStepM.appendChild(divDivTitleM);        

        lessonListM.appendChild(divStepM);
        /*QUIZ - Generación del cuestionario*/
        /*Se crea el elemento div de la lista de preguntas*/
        const divQuestionList = document.createElement("div");
        divQuestionList.id = "step-" + step.id + '-question-list';
        divQuestionList.className = "step-question-list"
        
        /*Recorriendo el array de preguntas*/
        step.questions.forEach((question, index) => {          
          const divQuestion = document.createElement("div");
          divQuestion.id = question.name;
          divQuestion.className = "question" + (index === 0 ? " show" : "");
          
          // Crea el elemento p para el enunciado de la pregunta
          const pStatement = document.createElement("p");
          pStatement.textContent = question.statement;          
          // Crea el elemento div para las opciones de respuesta
          const divOptions = document.createElement("div");
          divOptions.className = "question-options";
          question.options.forEach((option, i) => {
            // Crea el elemento div para la opción
            const divOption = document.createElement("div");
            divOption.className = "form-check";
            // Crea el elemento input para el radio button
            const inputRadio = document.createElement("input");
            inputRadio.className = "form-check-input";
            inputRadio.type = "radio";
            inputRadio.name = "flexRadioDefault" + (index + 1);
            inputRadio.id = "flexRadioDefault" + (i + 1) + "-" + (index + 1) + "-" + (stepIndex + 1);
            // Crea el elemento label para el texto de la opción
            const labelOption = document.createElement("label");
            labelOption.className = "form-check-label";
            labelOption.htmlFor = "flexRadioDefault" + (i + 1) + "-" + (index + 1) + "-" + (stepIndex + 1);
            labelOption.textContent = option.option;

            // Agrega el input y el label al div de la opción
            divOption.appendChild(inputRadio);
            divOption.appendChild(labelOption);

            // Agrega el div de la opción al div de opciones
            divOptions.appendChild(divOption);
          });
          // Si no es el último elemento
          if (index < (step.questions.length - 1)) {            
            // Agrega el enunciado y las opciones al div de la pregunta
            divQuestion.appendChild(pStatement);
            divQuestion.appendChild(divOptions);
          } else {
            // Agrega la sección de evaluación
            const buttonEvaluation = document.createElement("div");
            buttonEvaluation.className = "evaluation";

            const buttonEval = document.createElement("button");
            buttonEval.type = "button";
            buttonEval.className = "btn btn-success";
            buttonEval.textContent = "Evaluacion";
            buttonEval.onclick = eval;

            buttonEvaluation.appendChild(buttonEval);
            divQuestion.appendChild(buttonEvaluation);
          }          
          // Agrega el div de la pregunta al contenedor
          divQuestionList.appendChild(divQuestion);
        });
        // Agrega los botones previo y siguiente al final del contenedor
        const buttonQuest = document.createElement("div");
        buttonQuest.className = "button-quest";

        const buttonPrev = document.createElement("button");
        buttonPrev.type = "button";
        buttonPrev.className = "btn btn-outline-primary m-2";
        buttonPrev.textContent = "Previa";
        buttonPrev.onclick = prev;

        const buttonNext = document.createElement("button");
        buttonNext.type = "button";
        buttonNext.className = "btn btn-outline-primary m-2";
        buttonNext.textContent = "Siguiente";
        buttonNext.onclick = next;
        
        buttonQuest.appendChild(buttonPrev);
        buttonQuest.appendChild(buttonNext);

        divQuestionList.appendChild(buttonQuest);
        statements.appendChild(divQuestionList);        
      });
      
      })
      .catch(error => {
        console.log('Error al leer el archivo:', error);
      });
      
      /********************************************************************************/
      /*Operaciones: Funciones para la manipulación del DOM*/
      /********************************************************************************/
      function chatOrderNuevos(event, type) {
        /*GET Reemplazar por httpRequest Get*/
        const chatMessages = JSON.parse(localStorage.getItem("chat"));                

        let nodoId = '';
        const node = event.target;
        Array.from(node.parentNode.children).forEach(child => child.classList.remove('active'));
        node.classList.add("active");                
        const chatsOrdered = document.createDocumentFragment();
        const chatMessagesOrdered = chatMessages.filter(chat => chat.type === type);
        chatMessagesOrdered.sort(function(a, b) {        
          return a.days === b.days ? 0 : (a.days < b.days ? -1 : 1)
        });
        
        if (type === 'A') {
          nodoId = "aportes";          
        } else {
          nodoId = "preguntas";          
        }
        
        const divAportes = document.getElementById(nodoId);

        const chats = Array.from(divAportes.children);                        
        chatMessagesOrdered.forEach(function(message) {          
          chatsOrdered.appendChild(chats.find(chat => chat.id === ('chat-' + message.id)).cloneNode(true));                    
        });
        
        divAportes.innerHTML = null;
        divAportes.appendChild(chatsOrdered);
      }

      function chatOrderVotados(event, type) {
        /*GET Reemplazar por httpRequest Get*/
        const chatMessages = JSON.parse(localStorage.getItem("chat"));                

        let nodoId = '';
        const node = event.target;
        Array.from(node.parentNode.children).forEach(child => child.classList.remove('active'));
        node.classList.add("active");
        
        
        const chatsOrdered = document.createDocumentFragment();
        const chatMessagesOrdered = chatMessages.filter(chat => chat.type === type);
        chatMessagesOrdered.sort(function(a, b) {        
          return a.stars === b.stars ? 0 : (a.stars > b.stars ? -1 : 1)
        });
        
        if (type === 'A') {
          nodoId = "aportes";          
        } else {
          nodoId = "preguntas";          
        }

        const divAportes = document.getElementById(nodoId);
        const chats = Array.from(divAportes.children);                        
        chatMessagesOrdered.forEach(function(message) {          
          chatsOrdered.appendChild(chats.find(chat => chat.id === ('chat-' + message.id)).cloneNode(true));                    
        });

        divAportes.innerHTML = null;
        divAportes.appendChild(chatsOrdered);        
      }

      function chatOrderSin(event, type) {
        
        /*GET Reemplazar por httpRequest Get*/
        const chatMessages = JSON.parse(localStorage.getItem("chat"));                
        let nodoId = '';
        const node = event.target;
        Array.from(node.parentNode.children).forEach(child => child.classList.remove('active'));
        node.classList.add("active");

        const chatsOrdered = document.createDocumentFragment();
        const chatMessagesOrdered = chatMessages.filter(chat => chat.type === type);
        chatMessagesOrdered.sort(function(a, b) {        
          return a.answers === b.answers ? 0 : (a.answers < b.answers ? -1 : 1)
        });
        
        if (type === 'A') {
          nodoId = "aportes";          
        } else {
          nodoId = "preguntas";          
        }

        const divAportes = document.getElementById(nodoId);          

        const chats = Array.from(divAportes.children);                        
        chatMessagesOrdered.forEach(function(message) {          
          chatsOrdered.appendChild(chats.find(chat => chat.id === ('chat-' + message.id)).cloneNode(true));                    
        });

        divAportes.innerHTML = null;
        divAportes.appendChild(chatsOrdered);        
      }

      function addVote(event) {        
        let parentNode = event.target; 
        
        while (parentNode) {
          if (parentNode.id) {            
            break;
          }
          parentNode = parentNode.parentNode;
        }
        
        const iconInactive = parentNode.querySelector(".bi-heart");        
        const iconActive = parentNode.querySelector(".bi-heart-fill");
        const isHidden = iconActive.classList.contains("hidden");        
        if (isHidden) {
          iconActive.classList.remove("hidden");
          iconInactive.classList.add("hidden");
          const stars = parentNode.querySelector(".votes");
          stars.textContent = +stars.textContent + 1;
        } else {
          iconActive.classList.add("hidden");
          iconInactive.classList.remove("hidden");
          const stars = parentNode.querySelector(".votes");
          stars.textContent = +stars.textContent - 1;
        }
        /*POST httpRequest Post*/
        //
      }

      /*QUIZ: Función para iniciar examen*/
      function enableTest() {
        const currentListStep = document.getElementById("stepper");
        const steps = currentListStep.querySelectorAll(".step");
        const stepsArray = Array.from(steps);
        const currentStep = stepsArray.find(item => item.classList.contains("step-active"));

        /*GET Reemplazar por httpRequest Get*/
        const answers = JSON.parse(localStorage.getItem("answers"));          

        const answered = answers.find(item => "step-" + item.id === currentStep.id);
        if (answered.status === "complete") {
          return;
        }
        const node = document.getElementById(currentStep.id + "-question-list");        
        node.classList.add("display");
      }

      /*QUIZ: siguiente pregunta*/
      function next() {
        /*Se obtiene el current step*/
        const currentListStep = document.getElementById("stepper");
        const steps = currentListStep.querySelectorAll(".step");
        const stepsArray = Array.from(steps);
        const currentStep = stepsArray.find(item => item.classList.contains("step-active"));
        
        /*Se utiliza el current step para buscar la lista correcta de preguntas*/
        const lista = document.getElementById(currentStep.id + "-question-list");
        const elementos = lista.querySelectorAll(".question");
        const items = Array.from(elementos);
        const indexItem = items.findIndex(item => item.classList.contains("show"));
        if (indexItem !== -1 && indexItem < items.length-1) {
          /*si se lo encuentra y ademas no es el ultimo nodo...*/
          /*los inputs del radio button*/
          const inputs = Array.from(items[indexItem].querySelectorAll('input[type="radio"]'));          
          /*se obtiene la respuesta*/
          const answer = inputs.findIndex(input => input.checked === true) + 1;

          /*actualizacion del array de respuestas*/
          /*GET Reemplazar por httpRequest Get*/
          const answers = JSON.parse(localStorage.getItem("answers"));          
          const answered = (answers.find(item => ("step-" + item.id) === currentStep.id)).questions.find(item => item.name === items[indexItem].id);
          answered.values.answered = answer;          
          /*POST Reemplazar por httpRequest Post*/
          localStorage.setItem("answers", JSON.stringify(answers));

          /*el paso de pregunta*/
          items[indexItem].classList.remove("show");
          items[indexItem + 1].classList.add("show");
        }
      }

      /*QUIZ: pregunta previa*/
      function prev() {
        /*Se obtiene el current step*/
        const currentListStep = document.getElementById("stepper");
        const steps = currentListStep.querySelectorAll(".step");
        const stepsArray = Array.from(steps);
        const currentStep = stepsArray.find(item => item.classList.contains("step-active"));
        
        /*Se utiliza el current step para buscar la lista correcta de preguntas*/
        const lista = document.getElementById(currentStep.id + "-question-list");
        const elementos = lista.querySelectorAll(".question");
        const items = Array.from(elementos);        
        const indexItem = items.findIndex((item) => item.classList.contains("show"));
        if (indexItem !== -1 && indexItem > 0) {
          items[indexItem].classList.remove("show");
          items[indexItem - 1].classList.add("show");
        }
      }

      /*QUIZ: Proceso de evaluación*/
      function eval() {       
        /*Se obtiene el current step*/        
        const currentListStep = document.getElementById("stepper");
        const steps = currentListStep.querySelectorAll(".step");
        const stepsArray = Array.from(steps);
        const currentStep = stepsArray.find(item => item.classList.contains("step-active"));

        /*se obtiene la lista de respuestas del current step*/

        /*GET Reemplazar por httpRequest Get*/
        const answers = JSON.parse(localStorage.getItem("answers"));

        const index = answers.findIndex(item => ("step-" + item.id) === currentStep.id);
        const step = answers[index];
        /*se obtienen el criterio de aprobacion en %*/
        const criteria = step.criteria;
        
        let total = 0;
        step.questions.forEach(item => {
          if (item.values.goodanswer === item.values.answered) {            
            total = total + 1;
          }
        });        
        
        const resultado = Math.round((total/step.questions.length)*100);
        if (criteria <= resultado) {          
          //step.classList.add("complete");
          step.status = "complete";
          // si el numero de index dice que no es el ultimo se asigna enabled al siguiente
          if (index < answers.length - 1) {
            const stepNext = answers[index + 1];
            stepNext.status = "enabled";
            /*Post Reemplazar por httpRequest Post*/
            localStorage.setItem("answers", JSON.stringify(answers));
          }


          const circle = currentStep.querySelector(".circle:first-child");
          const circleSpan = circle.querySelector("span");
          circleSpan.classList.add("complete");
          circleSpan.classList.remove("uncomplete");
          const circleIcon = circle.querySelector("i");
          circleIcon.classList.add("complete");
          circleIcon.classList.remove("uncomplete");

          const currentStepS = document.getElementById("stepps-" + step.id);
          const circleS = currentStepS.querySelector(".circle:first-child");
          const circleSpanS = circleS.querySelector("span");
          circleSpanS.classList.add("complete");
          circleSpanS.classList.remove("uncomplete");
          const circleIconS = circleS.querySelector("i");
          circleIconS.classList.add("complete");
          circleIconS.classList.remove("uncomplete");

          const currentStepM = document.getElementById("mstepps-" + step.id);
          const circleM = currentStepM.querySelector(".circle:first-child");
          const circleSpanM = circleM.querySelector("span");
          circleSpanM.classList.add("complete");
          circleSpanM.classList.remove("uncomplete");
          const circleIconM = circleM.querySelector("i");
          circleIconM.classList.add("complete");
          circleIconM.classList.remove("uncomplete");


          const mensaje = 'Felicidades su resultado fue de' + resultado + '%, se habilitó la siguiente lección';
          alert(mensaje, 'success');
        } else {
          const mensaje = 'El mínimo requerido es ' + criteria + '% su resultado fue de ' + resultado + '%';
          alert(mensaje, 'danger');
        }

        // Alerta Bootstrap
        function alert(mensaje, tipo) {
          const alertPlaceholder = document.getElementById('liveAlertPlaceholder')
          const appendAlert = (message, type) => {
            const wrapper = document.createElement('div')
            wrapper.innerHTML = [
              `<div class="alert alert-${type} alert-dismissible" role="alert">`,
              `   <div>${message}</div>`,
              '   <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>',
              '</div>'
            ].join('')

            alertPlaceholder.append(wrapper)
          }
          appendAlert(mensaje, tipo)
        }        
      }
      /**/
      /*SCRIPT PARA EL COMPORTAMIENTO DEL STEPPER*/
      /*Asignacion del recurso para el iframe VIDEO*/
      function stepFunction(event) {                
        if (!event) {
          return;
        }
        
        /*GET Reemplazar por httpRequest Get*/
        const answers = JSON.parse(localStorage.getItem("answers"));                  
            
        let parentNode = event.target; 
        // El primer parent nodo con id
        while (parentNode) {
          if (parentNode.id) {            
            break;
          }
          parentNode = parentNode.parentNode;
        }
        const node = answers.find(item => (("step-" + item.id) === parentNode.id) || (("stepps-" + item.id) === parentNode.id) || (("mstepps-" + item.id) === parentNode.id));                

        if (node.status === "disabled") {
          console.log("disabled");
          return;
        }

        // Propagando la desactivación de todos los nodos para habilitar sólo el que corresponde
        const lista1 = document.getElementById("side-stepper");
        const lista2 = document.getElementById("stepper");
        const lista3 = document.getElementById("mobile-stepper");
        const elementos1 = lista1.querySelectorAll(".step");
        const elementos2 = lista2.querySelectorAll(".step");
        const elementos3 = lista3.querySelectorAll(".step");
        const iframe = document.getElementById("videoFrame");        
        elementos1.forEach(function (otroElemento) {
            otroElemento.classList.remove("step-active");
          });
        elementos2.forEach(function (otroElemento) {
          const node = document.getElementById(otroElemento.id + "-question-list");
          if (node) {
            node.classList.remove("display");
          }          
          otroElemento.classList.remove("step-active");
        });
        elementos3.forEach(function (otroElemento) {
          otroElemento.classList.remove("step-active");
        });

        // Asignación del video la iframe
        iframe.src = node.src;
        const stepName = "step-" + node.id;
        const stepSName = "stepps-" + node.id;
        const stepMName = "mstepps-" + node.id;
        const stepDiv = (parentNode.id);
        
        switch (parentNode.id) {
          case stepName:        
            parentNode.classList.add("step-active");
            document.getElementById(stepSName).classList.add("step-active");                
            document.getElementById(stepMName).classList.add("step-active");                
            break;
        
          case stepSName: 
            parentNode.classList.add("step-active");
            document.getElementById(stepName).classList.add("step-active");                
            document.getElementById(stepMName).classList.add("step-active");                
            break
          case stepMName: 
            parentNode.classList.add("step-active");
            document.getElementById(stepName).classList.add("step-active");                
            document.getElementById(stepSName).classList.add("step-active");                
            break
          default:
            break;
        }                
      }
      /**/
    </script>
    
    <script>
      /*Script para cerrar el STEPPER*/      
      document.addEventListener("click", function(event) {
        var elemento = document.getElementById("stepper");
        var segundoElemento = document.getElementById("offcanvas");                
        if ((segundoElemento.classList.contains("showing") || segundoElemento.classList.contains("show")) && !segundoElemento.classList.contains("hiding") ) {
          elemento.style.display = "none"
        } else {
          elemento.style.display = "block"
        }                
      });
      document.addEventListener("keydown", function (evento) {
        var elemento = document.getElementById("stepper");        
        if (evento.key === "Escape") {
          elemento.style.display = "block";
        }
      });
    </script>
  </body>
</html>
